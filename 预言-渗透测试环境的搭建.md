## 渗透测试环境的搭建

想当初预言无数、世界有太多变数。											*author：Prophesy 预言*



#### 0x01前言

##### 1.1 虚拟环境的重要性

网络安全法第二十七条：

- 任何个人和组织不得从事非法侵入他人网络、干扰他人网络正常功能、窃取网络数据等危害网络安全的活动；不得提供专门用于从事侵入网络、干扰网络正常功能及防护措施、窃取网络数据等危害网络安全活动的程序、工具；明知他人从事危害网络安全的活动的，不得为其提供技术支持、广告推广、支付结算等帮助。

一句话讲晒：

- 一切未授权的操作都属于犯法。



#### 0x02环境准备

##### 2.1 系统环境

- VMware虚拟机、windows2003、windows7、kali linux、wooyun镜像

##### 2.2 渗透环境

- phpstudy、python2.x、python3.x、Java环境、火狐/水狐浏览器、渗透工具包



#### 0x03环境搭建

##### 3.1 Vmware虚拟机

下载地址：https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html

双击exe文件、一路下一步

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/51108857.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/52456776.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/72851817.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/46990531.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/8268669.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/4295543.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/53046581.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/96219843.jpg)

可以看到没密钥可以试用30天。

想一直用就自行百度密钥。

密钥：

- YG5H2-ANZ0H-M8ERY-TXZZZ-YKRV8

- UG5J2-0ME12-M89WY-NPWXX-WQH88

- UA5DR-2ZD4H-089FY-6YQ5T-YPRX6

- GA590-86Y05-4806Y-X4PEE-ZV8E0

- ZF582-0NW5N-H8D2P-0XZEE-Z22VA


![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/37866126.jpg)



##### 3.2 Windows 2003 

下载地址：https://msdn.itellyou.cn/

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/81436235.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/50787518.jpg)

选择典型-->下一步-->选择镜像-->下一步

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/81581606.jpg)

百度一个密钥填进去

MDGJK-PF6YQ-PD8DJ-RFQVM-7WKWG

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/14486474.jpg)

改一下路径

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/12770097.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/72811560.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/53849165.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/29227674.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/18016890.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/66963123.jpg)

自动安装、无需任何操作。

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/71348068.jpg)

一个字：等等等等等等等等等等等等等等等等

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/57634644.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/9089814.jpg)

登录-->自动安装vmware tools

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/18943808.jpg)

安装完vmware tools会自动重启。

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/5435524.jpg)

Ok 搞定。



##### 3.3 Windows 7 

下载地址：https://msdn.itellyou.cn/

不会新建虚拟机的请看上面windows 2003。

新建是同理的。只是选择的境像不同而已

自动安装、等就好了。

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/21399171.jpg)

一个字：等等等等等等等等等等等等等

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/40045359.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/82261435.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/72379137.jpg)

自动安装 VMware tools 

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/12524924.jpg)

![](http://prophesy.oss-cn-shenzhen.aliyuncs.com/18-11-7/93817427.jpg)

Ok win7也搞定了。



##### 3.4 Kali linux 

官网：https://kali.org

已经安装好的kali包：https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/

有已经下载好的包就不下载镜像安装了。偷一下小懒。

![](https://i.loli.net/2018/11/07/5be1e8feaa863.png)

![](https://i.loli.net/2018/11/07/5be1e94517126.png)

下载完成解压导入虚拟机就好了

![](https://i.loli.net/2018/11/07/5be1e94518aab.png)

![](https://i.loli.net/2018/11/07/5be1e94520b06.png)

![](https://i.loli.net/2018/11/07/5be1e9452548f.png)

![](https://i.loli.net/2018/11/07/5be1e9452d6dd.png)

![](https://i.loli.net/2018/11/07/5be1e94527f71.png)

点击 我已复制该虚拟机

账号：root  密码：toor

![](https://i.loli.net/2018/11/07/5be1e9453c33b.png)

![](https://i.loli.net/2018/11/07/5be1e9453eb3b.png)

![](https://i.loli.net/2018/11/07/5be1e9454ca43.png)

Ok 我的大 kali  也搞定了。



##### 3.5 wooyun镜像搭建

项目：https://github.com/ANyedt/wooyun_public

下载地址：https://pan.baidu.com/s/1HkR4ggvAwTikshsjcKYBuA
提取密码：8wnb（2018.4.23更新）

虚拟机用户名、密码为hancool/qwe123



![](https://i.loli.net/2018/11/07/5be1ea8cc675a.png)

下载完成-->解压-->导入虚拟机

![](https://i.loli.net/2018/11/07/5be1ea8cd1549.png)

![](https://i.loli.net/2018/11/07/5be1ea8ccb124.png)

![](https://i.loli.net/2018/11/07/5be1ea8ccded6.png)

![](https://i.loli.net/2018/11/07/5be1ea8ccf8a3.png)

查看IP地址、然后在浏览器打开

![](https://i.loli.net/2018/11/07/5be1ea8cd7035.png)

Ok 就是这么简单。



#### 0x04软件安装

##### 4.1 Python环境

下载地址：https://www.python.org/downloads/windows/

![](https://i.loli.net/2018/11/07/5be1eb96632d4.png)

第一个是python3.x

第二个是python2.x

###### 4.1.1 Python2

![](https://i.loli.net/2018/11/07/5be1eb969d94c.png)

![](https://i.loli.net/2018/11/07/5be1eb966748b.png)

双击安装

![](https://i.loli.net/2018/11/07/5be1eb9698423.png)

![](https://i.loli.net/2018/11/07/5be1eb9697dcb.png)

![](https://i.loli.net/2018/11/07/5be1eb969d047.png)

![](https://i.loli.net/2018/11/07/5be1eb969c8a5.png)

![](https://i.loli.net/2018/11/07/5be1eb969bf57.png)

![](https://i.loli.net/2018/11/07/5be1ecb8ab804.png)



###### 4.1.2 Python3

![](https://i.loli.net/2018/11/07/5be1ecb8b7dfd.png)

![](https://i.loli.net/2018/11/07/5be1ecb8ab213.png)

python3的后缀是exe，直接双击安装

![](https://i.loli.net/2018/11/07/5be1ecb8ccc39.png)

![](https://i.loli.net/2018/11/07/5be1ecb8cc2b3.png)

![](https://i.loli.net/2018/11/07/5be1ecb8cd499.png)

![](https://i.loli.net/2018/11/07/5be1ecb8cdf0d.png)

![](https://i.loli.net/2018/11/07/5be1ecb8d2cdc.png)

![](https://i.loli.net/2018/11/07/5be1ee05caae8.png)

![](https://i.loli.net/2018/11/07/5be1ee05b6f40.png)

默认变成了python3、应该是环境变量的问题。

![](https://i.loli.net/2018/11/07/5be1ee05c3dec.png)



###### 4.1.3 常见问题

![](https://i.loli.net/2018/11/07/5be1ee05b8bc8.png)

这是环境变量没配置好的问题。

首选找到python2或3安装的路径。

例：C:\Python27

右键 此电脑-->属性

![](https://i.loli.net/2018/11/07/5be1ee05c901f.png)

点击高级-->环境变量

![](https://i.loli.net/2018/11/07/5be1ee05cce95.png)

找到系统变量的path点击编辑

![](https://i.loli.net/2018/11/07/5be1ee05c1e1c.png)

![](https://i.loli.net/2018/11/07/5be1ee05c5a69.png)

![](https://i.loli.net/2018/11/07/5be1ee05c745d.png)

Ok、成功启动。Python3 同理。



##### 4.2 Java环境

下载地址：https://www.oracle.com/technetwork/java/javase/downloads/index.html

![](https://i.loli.net/2018/11/07/5be1ef429cde2.png)

![](https://i.loli.net/2018/11/07/5be1ef429eb2a.png)

![](https://i.loli.net/2018/11/07/5be1ef42a0091.png)

![](https://i.loli.net/2018/11/07/5be1ef429c048.png)

安装很简单一路下一步就好。

![](https://i.loli.net/2018/11/07/5be1ef4299acb.png)

老问题、环境变量没配置好。

win10直接在小娜搜索环境变量就会看到编辑系统环境变量

此电脑-->属性-->高级系统设置-->高级-->环境变量-->系统path-->编辑-->新建-->复制jdk的路径。

![](https://i.loli.net/2018/11/07/5be1ef429e255.png)

![](https://i.loli.net/2018/11/07/5be1ef429b839.png)

在cmd输入java --version可以看到java的版本。说明已经安装配置好了



##### 4.3 水狐浏览器

下载地址：https://www.waterfoxproject.org/en-US/waterfox/new/?scene=1

下载好直接双击安装包

![](https://i.loli.net/2018/11/07/5be1f03797f0f.png)

![](https://i.loli.net/2018/11/07/5be1f037a228d.png)

![](https://i.loli.net/2018/11/07/5be1f037a0511.png)

如果你点击的是 Standard 就会默认安装在C盘

如果你点击的是 Custom 就能自己选择安装的路径

![](https://i.loli.net/2018/11/07/5be1f037adc50.png)

上图是选择了 Standard

![](https://i.loli.net/2018/11/07/5be1f037ac2b8.png)

上图片选择的是Custom

![](https://i.loli.net/2018/11/07/5be1f037a766b.png)

![](https://i.loli.net/2018/11/07/5be1f037a9189.png)

![](https://i.loli.net/2018/11/07/5be1f037aa8fb.png)

![](https://i.loli.net/2018/11/07/5be1f037af5a7.png)

![](https://i.loli.net/2018/11/07/5be1f037b11bf.png)

##### 4.4 phpstudy

官网：http://phpstudy.php.cn/

下载好是一个解压文件，解压后点击.exe文件安装

![](https://i.loli.net/2018/11/07/5be1f16dc6099.png)

选择安装路径，提示不能有中文

![](https://i.loli.net/2018/11/07/5be1f16dbe32b.png)

安装后打开会提示没安装运行库、可以百度或微软下载相对应的库

![](https://i.loli.net/2018/11/07/5be1f16dbfe43.png)

vc9 ：https://www.microsoft.com/zh-cn/download/details.aspx?id=5582

vc11：https://www.microsoft.com/zh-CN/download/details.aspx?id=30679

注意：要安装的库是32位的，也就是x86

安装库很简单，一直下一步然后点同意就好。

安装好库，点击启动phpstudy

![](https://i.loli.net/2018/11/07/5be1f16dc1828.png)



#### 0x05前言

以前就安装好各种环境。

然后花几个小时重新安装过是什么心情？

一万个草泥马在心里路过啊.........

默默给自己一个心理安慰：孰能生巧

写笔记是一件很困难的事。

一定要坚持、坚持、再坚持。